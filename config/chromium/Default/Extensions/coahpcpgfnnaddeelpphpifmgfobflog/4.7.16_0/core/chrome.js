const lang=chrome.i18n.getUILanguage().split('-');chrome.runtime.onInstalled.addListener((a)=>{'undefined'!=typeof App.on[a.reason]&&App.on[a.reason](a)}),chrome.runtime.onMessage.addListener((a)=>{a.pp_action&&('click_review'===a.pp_action&&chrome.tabs.create({url:'https://chrome.google.com/webstore/detail/coahpcpgfnnaddeelpphpifmgfobflog/reviews',active:!0}),ga('send','event','ReviewsPopup',a.pp_action,''))}),chrome.runtime.onUpdateAvailable.addListener(()=>App.proxy.apply()),chrome.tabs.onUpdated.addListener((a,b,c)=>{'complete'===c.status&&ga('send','pageview',c.url),'http://vk.com'===c.url&&chrome.tabs.update(a,{url:'https://vk.com'})}),chrome.tabs.onCreated.addListener((a)=>{'http://vk.com'===a.url&&chrome.tabs.update(id,{url:'https://vk.com'})}),chrome.webRequest.onErrorOccurred.addListener((a)=>{if('net::ERR_CONNECTION_TIMED_OUT'===a.error&&'main_frame'===a.type){const b=setInterval(()=>{App.proxy.apply(b)},1e3);ga('send','event','Errors','ERR_CONNECTION_TIMED_OUT',`${a.url}`)}},{urls:['<all_urls>']}),chrome.browserAction.onClicked.addListener(App.on.browserActionClicked),chrome.runtime.setUninstallURL(`https://vkunblock.com/uninstall.php?l=${lang}&id=${chrome.runtime.id}`);